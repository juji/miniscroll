// jquery mousewheel
// https://github.com/brandonaaron/jquery-mousewheel/ | 
// Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh) | 
// Licensed under the MIT License

// miniscroll.js
// copyright @2014 Tri Rahmat gunadi; jujiyangasli@gmail.com
// u can use this code for anything, and change this code as you wish
(function(){var e={};(function(t){e.pc=!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))})(navigator.userAgent||navigator.vendor||window.opera);if(!e.pc)return;(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e}else{e(jQuery)}})(function(e){function t(t){var i=t||window.event,s=o.call(arguments,1),f=0,l=0,c=0,h=0;t=e.event.fix(i);t.type="mousewheel";if("detail"in i){c=i.detail*-1}if("wheelDelta"in i){c=i.wheelDelta}if("wheelDeltaY"in i){c=i.wheelDeltaY}if("wheelDeltaX"in i){l=i.wheelDeltaX*-1}if("axis"in i&&i.axis===i.HORIZONTAL_AXIS){l=c*-1;c=0}f=c===0?l:c;if("deltaY"in i){c=i.deltaY*-1;f=c}if("deltaX"in i){l=i.deltaX;if(c===0){f=l*-1}}if(c===0&&l===0){return}if(i.deltaMode===1){var p=e.data(this,"mousewheel-line-height");f*=p;c*=p;l*=p}else if(i.deltaMode===2){var d=e.data(this,"mousewheel-page-height");f*=d;c*=d;l*=d}h=Math.max(Math.abs(c),Math.abs(l));if(!a||h<a){a=h;if(r(i,h)){a/=40}}if(r(i,h)){f/=40;l/=40;c/=40}f=Math[f>=1?"floor":"ceil"](f/a);l=Math[l>=1?"floor":"ceil"](l/a);c=Math[c>=1?"floor":"ceil"](c/a);t.deltaX=l;t.deltaY=c;t.deltaFactor=a;t.deltaMode=0;s.unshift(t,f,l,c);if(u){clearTimeout(u)}u=setTimeout(n,200);return(e.event.dispatch||e.event.handle).apply(this,s)}function n(){a=null}function r(e,t){return l.settings.adjustOldDeltas&&e.type==="mousewheel"&&t%120===0}var i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice,u,a;if(e.event.fixHooks){for(var f=i.length;f;){e.event.fixHooks[i[--f]]=e.event.mouseHooks}}var l=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var n=s.length;n;){this.addEventListener(s[--n],t,false)}}else{this.onmousewheel=t}e.data(this,"mousewheel-line-height",l.getLineHeight(this));e.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var e=s.length;e;){this.removeEventListener(s[--e],t,false)}}else{this.onmousewheel=null}},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:true}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});$.fn.miniscroll=function(t){function a(){$(".content",this).css({width:$(this).width()-$(".scrollpane",this).width()});var e=$(this).height()/$(".content",this).outerHeight();if(e>1)e=0;e=e*100+"%";$(".scrollindicator",this).css({height:e})}var n={delta:100,animate:true};if(t&&typeof t=="object")n=$.extend(n,t);if(t&&typeof t=="string"){var r=$(this).data("__scrollopt").delta;var i=$(".content",this).position().top;var s=0;if(t=="bottom"){var o=$(this).height()-$(".content",this).outerHeight();s=(i-o)/r*-1}else if(t=="top"){var o=0;s=(i-o)/r*-1}else if(/^\+/.test(t)){t=t.replace(/^\+$/,"");if(/\%$/.test(t)){t=t.replace(/\%$/,"")*1;t=$(".content",this).outerHeight()*(t/100)}else if(/\px$/.test(t)){t=t.replace(/\px$/,"")*1}s=t/r*-1}else if(/^\-/.test(t)){t=t.replace(/^\-$/,"");if(/\%$/.test(t)){t=t.replace(/\%$/,"")*1;t=$(".content",this).outerHeight()*(t/100)}else if(/\px$/.test(t)){t=t.replace(/\px$/,"")*1}s=t/r*-1}else if(/\px$/.test(t)){var o=t.replace(/\px$/,"")*1;s=(i+o)/r*-1}else if(/\%$/.test(t)){var o=t.replace(/\%$/,"")*1/100*$(".content",this).outerHeight();s=(i+o)/r*-1}else if(/^\#/.test(t)){if(!/^\#mscroll_/.test(t))t=t.replace(/^\#/,"#mscroll_");var u=t.replace(/^\#mscroll_/,"#");if(window.location.hash!==u)window.location.hash=u;if(!$(t,this).length)return;var o=$(t,this).position().top;s=(i+o)/r*-1}$(this).trigger("movescroll",s);return}return $(this).each(function(){if($(this).data("__scrollopt")){a.call(this)}if(!e.pc)return;$(this).css({overflow:"hidden",position:"relative"});$(this).append('<div class="scrollpane"><div class="scrollindicator"></div></div>');var t=0;var r=$(this);var i=$(".content",this);var s=$(".scrollindicator",this);var o=$(".scrollpane",this);$(this).data("__scrollopt",n);i.css({position:"absolute",top:"0px",left:"0px"});if(n.animate)$(r).addClass("scrollanim");$(window).on("resize.miniscroll",function(){a.call(r);$(this).trigger("movescroll",[1])});$(this).on("mousewheel",function(e){$(this).trigger("movescroll",[e.deltaY])});$(this).on("movescroll",function(e,o){t+=o*n.delta;var u=$(r).height()-$(i).outerHeight();if(t>0)t=0;if(t<u)t=u;i.css({top:t+"px"});var a=100*Math.abs(t)/i.outerHeight();s.css({top:a+"%"})});$(s).on("mousedown",function(e){var t=e.pageY;$("body").on("mousemove.miniscroll",function(e){var s=e.pageY-t;s*=i.outerHeight()/o.height();s/=n.delta;$(r).trigger("movescroll",[-s]);t=e.pageY});$("body").on("mouseup.miniscroll",function(e){$("body").off("mousemove.miniscroll");$("body").off("mouseup.miniscroll")});return false});$("[id]",i).each(function(){var e=$(this).attr("id");if(/^mscroll_/.test(e))return;$(this).attr("id","mscroll_"+e)});$(document).delegate("a[href^=#]","click.miniscroll",function(e){$(r).miniscroll($(this).attr("href"))});a.call(this);if(window.location.hash)$(r).miniscroll(window.location.hash)})};$(function(){$(".miniscroll").miniscroll()})})(window,jQuery)
